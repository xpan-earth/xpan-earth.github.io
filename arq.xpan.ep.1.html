<!DOCTYPE html>
<html lang="es" data-xpan>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="color-scheme" content="light dark"/>
<title>xpan.ep.1 — arquitectura</title>

<style>
  :root{
    --bg:#000; --fg:#E0E3E6; --fg-dim:#AEB4BA;
    --line:#2A2E31; --line-weak:#1A1D20;
    --accent:#1860FF;
    --font-ui:-apple-system,BlinkMacSystemFont,"Inter","Segoe UI",Roboto,Helvetica,Arial,sans-serif;
    --font-mono:"IBM Plex Mono","SFMono-Regular",Menlo,Consolas,Monaco,monospace;
    --maxw:1120px; --g:24px; --g2:32px;
    --pad-x: clamp(16px,4vw,48px); --header-h:64px;
    --b1:1px solid var(--line); --b0:1px solid var(--line-weak);
  }
  @media (prefers-color-scheme:light){
    :root{
      --bg:#FFFFFF; --fg:#0E1113; --fg-dim:#4A5158;
      --line:#D9DEE2; --line-weak:#ECEFF2; --accent:#1860FF;
    }
  }

  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--fg);
    font-family:var(--font-ui);
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }
  a{color:var(--accent); text-decoration:none; border-bottom:1px solid transparent; transition:border-color .15s linear}
  a:hover{border-color:var(--accent)}
  img,video{max-width:100%; height:auto; display:block; background:transparent}

  /* Header */
  header{
    position:fixed; top:12px; left:var(--pad-x); height:var(--header-h);
    display:flex; align-items:center; z-index:100;
  }
  header a{display:inline-flex; align-items:center}
  header img{
    width:48px; height:auto;
    mix-blend-mode:difference;
    filter: invert(1) saturate(100%);
  }
  @media (prefers-color-scheme:light){
    header img{ filter:none; }
  }

  /* Selector de idioma */
  .language-selector{
    position:fixed; top:12px; right:var(--pad-x); z-index:120;
    display:flex; gap:8px; align-items:center; text-transform:lowercase;
  }
  .language-selector button{
    appearance:none;
    font:600 .85rem/1 var(--font-ui);
    color:var(--fg-dim); background:transparent; border:1px solid var(--line);
    padding:6px 10px; cursor:pointer; letter-spacing:.2px;
    transition:color .15s linear, border-color .15s linear, background-color .15s linear;
  }
  .language-selector button:hover{color:var(--fg)}
  .language-selector button.active{color:var(--fg); border-color:var(--accent); background:rgba(24,96,255,.06)}

  /* Layout */
  .container{max-width:var(--maxw); margin:calc(var(--header-h) + 40px) auto 48px; padding:0 var(--pad-x)}
  h1{font:700 1.35rem/1.25 var(--font-ui); text-transform:lowercase; margin:0 0 6px}
  .meta{font:400 .9rem/1.5 var(--font-ui); color:var(--fg-dim); margin:0 0 24px}
  .description{font:400 1rem/1.6 var(--font-ui); max-width:720px}
  .description a{color:inherit; border-bottom:1px solid var(--fg-dim)}
  .description a:hover{border-color: var(--fg);}

  /* Galería */
  .gallery{
    max-width:var(--maxw); margin:32px auto; padding:0 var(--pad-x);
    display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:var(--g);
  }
  .gallery img{
    border:var(--b1); border-radius:0; background:transparent;
    object-fit:cover; aspect-ratio:4/3;
  }

  /* PDFs: estilo gdl (lista de <object>) */
  .pdf-embed{
    max-width:var(--maxw); margin:16px auto 64px; padding:0 var(--pad-x);
    display:grid; grid-template-columns:1fr; gap:var(--g2);
  }
  .pdf-embed object{width:100%; height:600px; border:none; background:#0C0D0F}
  @media (max-width:768px){
    header img{width:42px}
    .container{margin:calc(var(--header-h) + 28px) auto 40px}
    .gallery{gap:16px}
    .pdf-embed object{height:auto; aspect-ratio:4/3}
  }
  @media (prefers-color-scheme:light){
    .pdf-embed object{ background:#F3F5F7 }
  }

  /* Lightbox (añadido) */
  #xpan-lightbox{position:fixed;inset:0;z-index:9999;display:none;align-items:center;justify-content:center;background:rgba(10,10,10,.45);backdrop-filter:blur(10px) saturate(120%);-webkit-backdrop-filter:blur(10px) saturate(120%);touch-action:none;overscroll-behavior:contain}
  #xpan-lightbox.open{display:flex}
  #xpan-lightbox .sheet{position:relative;max-width:100vw;max-height:100vh;overflow:hidden;transform:scale(.985);opacity:0;transition:transform .18s cubic-bezier(.2,.8,.2,1),opacity .18s ease}
  #xpan-lightbox.open .sheet{transform:scale(1);opacity:1}
  #xpan-lightbox img,#xpan-lightbox video{display:block;width:auto;height:auto;max-width:100vw;max-height:100vh;object-fit:contain;margin:0;background:transparent}
  html.lb-open,body.lb-open{overflow:hidden;touch-action:none}
  @media (prefers-color-scheme:light){#xpan-lightbox{background:rgba(255,255,255,.55)}}
</style>

<script src="/assets/js/media-proxy.js" defer></script>
</head>
<body>
  <header>
    <a href="https://xpan.earth" target="_blank" rel="noopener">
      <img src="xpan.svg" alt="xpan" />
    </a>
  </header>

  <div class="language-selector" role="tablist" aria-label="selector de idioma">
    <button type="button" onclick="setLang('es')" class="active" aria-pressed="true" role="tab">es</button>
    <button type="button" onclick="setLang('en')" aria-pressed="false" role="tab">en</button>
    <button type="button" onclick="setLang('fr')" aria-pressed="false" role="tab">fr</button>
    <button type="button" onclick="setLang('jp')" aria-pressed="false" role="tab">jp</button>
  </div>

  <div class="container">
    <!-- español -->
    <div class="lang lang-es">
      <h1>xpan.ep.1 [espacio público uno]</h1>
      <div class="meta">octubre 2024 — ciudad de méxico</div>
      <div class="description">
        xpan.ep.1 es un sistema modular ubicado en roma norte, ciudad de méxico. diseñado, desarrollado y construido por xpan, fue la primera iteración del sistema de poros. abrió el 17 de octubre del 2024 como punto de partida para una serie de <a href="mdtc.xpan.ep.1.index.html"><i>activaciones</i></a> vinculadas a la topología conectiva.
        <br><br>
        la estructura se compone de 61 bastidores de acero y aluminio, organizados en una retícula que define el esqueleto espacial. una envolvente translúcida de policarbonato perforado genera 436 poros en muros y techo, operando como interfaz activa entre interior y exterior.
        <br><br>
        el diseño de iluminación utiliza el policarbonato como pantalla difusora, modulando la percepción espacial y la intensidad lumínica según la configuración. el sistema responde a distintas densidades, ritmos y formas de ocupación, alojando eventos, encuentros y ensamblajes producidos por la comunidad extendida de xpan.
      </div>
    </div>

    <!-- english -->
    <div class="lang lang-en" style="display:none;">
      <h1>xpan.ep.1 [public space one]</h1>
      <div class="meta">october 2024 — mexico city</div>
      <div class="description">
        xpan.ep.1 is a modular system located in roma norte, mexico city. designed, developed, and built by xpan, it was the first iteration of the porous system. it opened on october 17, 2024, as a starting point for a series of <a href="mdtc.xpan.ep.1.index.html"><i>activations</i></a> linked to the connective topology.
        <br><br>
        the structure is composed of 61 frames made of steel and aluminum, arranged in a grid that defines the spatial skeleton. a translucent envelope of perforated polycarbonate generates 436 pores across walls and ceiling, operating as an active interface between interior and exterior.
        <br><br>
        the lighting design uses the polycarbonate as a diffusing screen, modulating spatial perception and light intensity according to configuration. the system adapts to varying densities, rhythms, and modes of occupation, hosting events, gatherings, and assemblies produced by xpan's extended community.
      </div>
    </div>

    <!-- français -->
    <div class="lang lang-fr" style="display:none;">
      <h1>xpan.ep.1 [espace public un]</h1>
      <div class="meta">octobre 2024 — mexico</div>
      <div class="description">
        xpan.ep.1 est un système modulaire situé à roma norte, mexico. conçu, développé et construit par xpan, il constitue la première itération du système de pores. il a ouvert ses portes le 17 octobre 2024 comme point de départ pour une série <a href="mdtc.xpan.ep.1.index.html"><i>d'activations</i></a> liées à la topologie connective.
        <br><br>
        la structure se compose de 61 cadres en acier et aluminium, organisés en une grille définissant le squelette spatial. une enveloppe translucide en polycarbonate perforé génère 436 pores dans les murs et le plafond, agissant comme une interface active entre l’intérieur et l’extérieur.
        <br><br>
        le dispositif d’éclairage utilise le polycarbonate comme écran diffuseur, modulant la perception spatiale et l’intensité lumineuse selon la configuration. le système répond à diverses densités, rythmes et formes d’occupation, accueillant événements, rencontres et assemblages produits par la communauté étendue de xpan.
      </div>
    </div>

    <!-- 日本語 -->
    <div class="lang lang-jp" style="display:none;">
      <h1>xpan.ep.1［パブリックスペース１］</h1>
      <div class="meta">2024年10月 — メキシコシティ</div>
      <div class="description">
        xpan.ep.1は、メキシコシティのローマ・ノルテに位置するモジュール型システムです。xpanによって設計・開発・施工され、ポーラスシステムの最初の実装として2024年10月17日にオープンしました。これはトポロジー・コネクティブに連動した<a href="mdtc.xpan.ep.1.index.html"><i>アクティベーション</i></a>の連続の起点として機能します。
        <br><br>
        構造体はスチールとアルミニウム製のフレーム61本で構成され、空間的骨格を定義するグリッドとして配置されています。半透明のポリカーボネート被膜には壁と天井に合計436個のポアが施され、内外を接続するインターフェースとして機能します。
        <br><br>
        照明設計ではポリカーボネートを拡散スクリーンとして活用し、構成に応じて空間認識と光強度を調整します。このシステムはさまざまな密度、リズム、使用形態に対応し、xpanの拡張されたコミュニティによるイベントや集合、構築的介入を受け入れます。
      </div>
    </div>
  </div>

  <!-- Galería -->
  <div class="gallery">
    <img loading="lazy" decoding="async" alt="xpan.ep.1 — vista 1" data-src="https://d2w9rnfcy7mm78.cloudfront.net/36792475/original_7490285aa05acdab621f22ba6c1e429f.jpg?1747625341">
    <img loading="lazy" decoding="async" alt="xpan.ep.1 — vista 2" data-src="https://d2w9rnfcy7mm78.cloudfront.net/36792474/original_086d66608bda3ae5bddb8bb2119f24ff.jpg?1747625341">
    <img loading="lazy" decoding="async" alt="xpan.ep.1 — vista 3" data-src="https://d2w9rnfcy7mm78.cloudfront.net/36792472/original_7db102cac79b1640a8d9eb280d3df31d.jpg?1747625340">
    <img loading="lazy" decoding="async" alt="xpan.ep.1 — vista 4" data-src="https://d2w9rnfcy7mm78.cloudfront.net/36792470/original_944cb81e871d9960a15806f4bb4bfa96.jpg?1747625339">
    <img loading="lazy" decoding="async" alt="xpan.ep.1 — vista 5" data-src="https://d2w9rnfcy7mm78.cloudfront.net/36792469/original_8d03afe9f867abc31de44b6108ad445a.jpg?1747625338">
    <img loading="lazy" decoding="async" alt="xpan.ep.1 — vista 6" data-src="https://d2w9rnfcy7mm78.cloudfront.net/36792467/original_f7c5df59e567b20dd7f4103345a6cdf0.jpg?1747625336">
    <img loading="lazy" decoding="async" alt="xpan.ep.1 — vista 7" data-src="https://d2w9rnfcy7mm78.cloudfront.net/36792468/original_d0d96c6f8ee2aa331d17f6b75a5120b7.jpg?1747625338">
    <img loading="lazy" decoding="async" alt="xpan.ep.1 — vista 8" data-src="https://d2w9rnfcy7mm78.cloudfront.net/36792466/original_2ae3f0c655beb094434461d91e86d2bf.jpg?1747625336">
    <img loading="lazy" decoding="async" alt="xpan.ep.1 — vista 9" data-src="https://d2w9rnfcy7mm78.cloudfront.net/36792458/original_201d055b783aa4a610e329a23fcc0968.jpg?1747625331">
    <img loading="lazy" decoding="async" alt="xpan.ep.1 — vista 10" data-src="https://d2w9rnfcy7mm78.cloudfront.net/36794123/original_5a43036d33a9ac72aed7a14c1450f68c.jpg?1747633367">
    <img loading="lazy" decoding="async" alt="xpan.ep.1 — vista 11" data-src="https://d2w9rnfcy7mm78.cloudfront.net/36794120/original_61b8534028a7c86a88ee95950a9ef07c.jpg?1747633366">
    <img loading="lazy" decoding="async" alt="xpan.ep.1 — vista 12" data-src="https://d2w9rnfcy7mm78.cloudfront.net/36794119/original_e99bc8ad613c89a09f6dbc0aaee5e628.jpg?1747633364">
    <img loading="lazy" decoding="async" alt="xpan.ep.1 — vista 13" data-src="https://d2w9rnfcy7mm78.cloudfront.net/36794117/original_9b78c0133d9714cf1538ee3a11f536f6.jpg?1747633364">
    <img loading="lazy" decoding="async" alt="xpan.ep.1 — vista 14" data-src="https://d2w9rnfcy7mm78.cloudfront.net/36794116/original_9e320a0687df404efc9fcab076388b0e.jpg?1747633363">
  </div>

  <!-- PDFs (estilo gdl) -->
  <div class="pdf-embed">
    <object type="application/pdf" aria-label="plano 1" data="https://attachments.are.na/36794273/31c710cbdc2ca30c9fb66638d4ea224c.pdf?1747634363#page=1&zoom=page-width&view=FitH&toolbar=1&navpanes=0&statusbar=0"></object>
    <object type="application/pdf" aria-label="plano 2" data="https://attachments.are.na/36794272/d62dd6c04e7afd32b9317e3798c2b589.pdf?1747634362#page=1&zoom=page-width&view=FitH&toolbar=1&navpanes=0&statusbar=0"></object>
    <object type="application/pdf" aria-label="plano 3" data="https://attachments.are.na/36794271/3f84529d746199ed84c4ccf3f5dcc043.pdf?1747634362#page=1&zoom=page-width&view=FitH&toolbar=1&navpanes=0&statusbar=0"></object>
    <object type="application/pdf" aria-label="plano 4" data="https://attachments.are.na/36794269/36aa8995a7e51e49b6ee28669d8b783f.pdf?1747634361#page=1&zoom=page-width&view=FitH&toolbar=1&navpanes=0&statusbar=0"></object>
    <object type="application/pdf" aria-label="plano 5" data="https://attachments.are.na/36794270/a20a13bd08470b5e6bb9b8d96c62d68a.pdf?1747634362#page=1&zoom=page-width&view=FitH&toolbar=1&navpanes=0&statusbar=0"></object>
    <object type="application/pdf" aria-label="plano 6" data="https://attachments.are.na/36794268/3cc3bdcfd126b910503e64b43e963ee5.pdf?1747634361#page=1&zoom=page-width&view=FitH&toolbar=1&navpanes=0&statusbar=0"></object>
    <object type="application/pdf" aria-label="plano 7" data="https://attachments.are.na/36794267/976ea063e02863c0d51f60d1af3c902d.pdf?1747634361#page=1&zoom=page-width&view=FitH&toolbar=1&navpanes=0&statusbar=0"></object>
    <object type="application/pdf" aria-label="plano 8" data="https://attachments.are.na/36794265/04709d629c5e29feba815f190a40c651.pdf?1747634362#page=1&zoom=page-width&view=FitH&toolbar=1&navpanes=0&statusbar=0"></object>
    <object type="application/pdf" aria-label="plano 9" data="https://attachments.are.na/36794266/c503854d438a9ed3809b6abc6eb15d71.pdf?1747634362#page=1&zoom=page-width&view=FitH&toolbar=1&navpanes=0&statusbar=0"></object>
    <object type="application/pdf" aria-label="plano 10" data="https://attachments.are.na/36794264/caa14af2f0df80e0a067bf62b647539d.pdf?1747634361#page=1&zoom=page-width&view=FitH&toolbar=1&navpanes=0&statusbar=0"></object>
    <object type="application/pdf" aria-label="plano 11" data="https://attachments.are.na/36794263/6c9ea89fdd12929c4b482143c747222d.pdf?1747634362#page=1&zoom=page-width&view=FitH&toolbar=1&navpanes=0&statusbar=0"></object>
    <object type="application/pdf" aria-label="plano 12" data="https://attachments.are.na/36794262/ea4c211b279b3116e03245af883bfc40.pdf?1747634362#page=1&zoom=page-width&view=FitH&toolbar=1&navpanes=0&statusbar=0"></object>
    <object type="application/pdf" aria-label="plano 13" data="https://attachments.are.na/36794261/f6b8556bfe618d573690d5d418ad15d5.pdf?1747634361#page=1&zoom=page-width&view=FitH&toolbar=1&navpanes=0&statusbar=0"></object>
    <object type="application/pdf" aria-label="plano 14" data="https://attachments.are.na/36794260/1952c52ffb4c6c8dae33986e6a09641f.pdf?1747634361#page=1&zoom=page-width&view=FitH&toolbar=1&navpanes=0&statusbar=0"></object>
    <object type="application/pdf" aria-label="plano 15" data="https://attachments.are.na/36794259/684a0928bb0e5062f3fa24f448a2c33c.pdf?1747634361#page=1&zoom=page-width&view=FitH&toolbar=1&navpanes=0&statusbar=0"></object>
    <object type="application/pdf" aria-label="plano 16" data="https://attachments.are.na/36794258/20fd12f33e0eb2d4b67f399b4996cd11.pdf?1747634360#page=1&zoom=page-width&view=FitH&toolbar=1&navpanes=0&statusbar=0"></object>
    <object type="application/pdf" aria-label="plano 17" data="https://attachments.are.na/36794257/b3bad571ea513bc4dd52af01b3250614.pdf?1747634361#page=1&zoom=page-width&view=FitH&toolbar=1&navpanes=0&statusbar=0"></object>
  </div>

  <!-- Lightbox -->
  <div id="xpan-lightbox" role="dialog" aria-modal="true" aria-label="visor de medios"><div class="sheet"></div></div>

  <script>
/* patch: persistir scroll al abrir/cerrar lightbox en todas las páginas */
(() => {
  const lb = document.getElementById('xpan-lightbox');
  if (!lb) return;

  // Evita restauración automática del navegador
  if ('scrollRestoration' in history) { try { history.scrollRestoration = 'manual'; } catch(_){} }

  let savedY = 0;
  let saved = false;

  const save = () => {
    if (saved) return;
    savedY = window.pageYOffset || document.documentElement.scrollTop || 0;
    saved = true;
  };

  const restore = () => {
    if (!saved) return;
    const y = savedY;
    // Restaurar después de que el DOM termine de quitar clases/estilos del overlay
    requestAnimationFrame(() => {
      window.scrollTo(0, y);
      // Fallback por si hay otro reflow tardío
      setTimeout(() => window.scrollTo(0, y), 0);
    });
    saved = false;
  };

  // Observa cambios de estado del lightbox (clase .open)
  new MutationObserver((muts) => {
    for (const m of muts) {
      if (m.type === 'attributes' && m.attributeName === 'class') {
        const isOpen = lb.classList.contains('open');
        if (isOpen) save(); else restore();
      }
    }
  }).observe(lb, { attributes: true });

  // Fallback adicional: observa clases en <html>/<body> que tu script usa (lb-open)
  const observeClasses = (el) => new MutationObserver(() => {
    const isOpen = document.body.classList.contains('lb-open') || document.documentElement.classList.contains('lb-open');
    if (isOpen) save(); else restore();
  }).observe(el, { attributes: true, attributeFilter: ['class'] });

  observeClasses(document.documentElement);
  observeClasses(document.body);
})();
</script>

  <script>
    function setLang(lang){
      localStorage.setItem('lang', lang);
      document.querySelectorAll('.lang').forEach(el=>{
        el.style.display = el.classList.contains(`lang-${lang}`) ? 'block' : 'none';
      });
      document.querySelectorAll('.language-selector button').forEach(btn=>{
        const active = btn.textContent === lang;
        btn.classList.toggle('active', active);
        btn.setAttribute('aria-pressed', active ? 'true' : 'false');
      });
      document.documentElement.setAttribute('lang', lang);
    }
    setLang(localStorage.getItem('lang') || (navigator.language.slice(0,2) || 'es'));

    // Lazy imgs
    document.querySelectorAll('.gallery img').forEach(img=>{
      img.loading ||= 'lazy'; img.decoding ||= 'async';
      if(img.dataset.src){
        const obs=new IntersectionObserver(es=>{
          es.forEach(en=>{
            if(!en.isIntersecting) return;
            img.src=img.dataset.src; img.removeAttribute('data-src'); obs.unobserve(img);
          });
        },{rootMargin:'400px 0px'});
        obs.observe(img);
      }
    });

    // Lightbox (hidratación + navegación)
    (()=>{
      const lb = document.getElementById("xpan-lightbox");
      const sheet = lb.querySelector(".sheet");
      let items=[], idx=-1, t0=0, x0=0;

      function hydrate(el){
        if(!el) return;
        const tag = el.tagName.toLowerCase();
        const ds = el.getAttribute('data-src');
        if(tag==='img' && ds && !el.currentSrc && !el.src){ el.src = ds; }
        if(tag==='video' && ds && !el.currentSrc && !el.src){ el.src = ds; el.load(); }
      }
      function collect(){
        items = Array.from(document.querySelectorAll("img,video"))
          .filter(el => !el.closest("#xpan-lightbox") && !el.closest("a"));
      }
      function openAt(i){
        if(i<0 || i>=items.length) return;
        idx = i;
        const srcEl = items[idx];
        hydrate(srcEl);
        sheet.innerHTML = "";
        const isV = srcEl.tagName.toLowerCase()==="video";
        const el = document.createElement(isV?"video":"img");
        if(isV){
          el.src = srcEl.currentSrc || srcEl.src;
          el.playsInline = true; el.controls = true;
          el.loop = !!srcEl.loop; el.muted = srcEl.muted ?? true; el.autoplay = true;
        }else{
          el.src = srcEl.currentSrc || srcEl.src;
          el.decoding = "async"; el.loading = "eager"; el.alt = srcEl.alt || "";
        }
        sheet.appendChild(el);
        lb.classList.add("open");
        document.documentElement.classList.add("lb-open");
        document.body.classList.add("lb-open");
      }
      function close(){
        lb.classList.remove("open");
        sheet.innerHTML = "";
        document.documentElement.classList.remove("lb-open");
        document.body.classList.remove("lb-open");
        idx = -1;
      }
      function openFrom(el){
        collect(); hydrate(el);
        const i = items.indexOf(el);
        if(i>-1) openAt(i);
      }

      document.body.addEventListener("click",(ev)=>{
        const el = ev.target;
        if(!el) return;
        if(el.closest("a")) return;
        const tag = el.tagName;
        if(tag==="IMG" || tag==="VIDEO"){
          ev.preventDefault(); ev.stopPropagation();
          openFrom(el);
        }
      },{capture:true, passive:false});

      lb.addEventListener("click",(ev)=>{ if(ev.target===lb) close(); });
      window.addEventListener("keydown",(ev)=>{
        if(!lb.classList.contains("open")) return;
        if(ev.key==="Escape") return close();
        if((ev.key==="ArrowRight"||ev.key==="l") && idx<items.length-1) return openAt(idx+1);
        if((ev.key==="ArrowLeft" ||ev.key==="h") && idx>0) return openAt(idx-1);
      });

      lb.addEventListener("touchstart",(e)=>{ t0=Date.now(); x0=e.touches[0].clientX; },{passive:true});
      lb.addEventListener("touchend",(e)=>{
        const dx=e.changedTouches[0].clientX-x0, dt=Date.now()-t0;
        if(Math.abs(dx)>50 && dt<600){
          if(dx<0 && idx<items.length-1) openAt(idx+1);
          else if(dx>0 && idx>0) openAt(idx-1);
        } else { close(); }
      },{passive:true});
    })();
  </script>
</body>
</html>
