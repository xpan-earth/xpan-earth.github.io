
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="color-scheme" content="light dark"/>
<title>mdtc.xpan.ep.1 — index</title>

<link rel="preconnect" href="https://d2w9rnfcy7mm78.cloudfront.net" crossorigin>
<link rel="preconnect" href="https://attachments.are.na" crossorigin>
<link rel="dns-prefetch" href="https://d2w9rnfcy7mm78.cloudfront.net">
<link rel="dns-prefetch" href="https://attachments.are.na">

<style>
:root{ --bg:#fff; --fg:#0a0a0a; --line:rgba(0,0,0,.12); --radius:14px; --gap:.8rem; --ease:cubic-bezier(.22,.61,.36,1); --aei-block:140px; }

*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font-family:Times, ui-serif, Georgia, serif}
a{color:inherit;text-decoration:none}
img,video{display:block;max-width:100%;height:auto}
body{overflow-x:hidden}

header{
  position:fixed;
  top:1rem;
  left:1rem;
  right:1rem;
  z-index:30;
  display:flex;
  justify-content:space-between; /* separa logo a la izq y menú a la der */
  gap:.8rem;
  align-items:center;
}
header img{width:50px;height:auto;display:block}
.language-selector{margin-left:.5rem;display:flex;gap:.5rem;font-size:.9rem;text-transform:lowercase}
.language-selector button{background:none;border:1px solid var(--line);border-radius:999px;padding:.25rem .6rem;cursor:pointer;opacity:.7}
.language-selector button.active{background:#000;color:#fff;opacity:1}

main{max-width:1440px;margin:96px auto 5rem;padding:0 1.25rem}
h1{font-size:clamp(1.1rem,2.2vw,1.5rem);margin:.2rem 0;text-transform:lowercase}
.meta{opacity:.8;font-style:italic;margin:0 0 1rem}
.description{font-size:1rem;line-height:1.6;max-width:980px;margin:.5rem 0 1rem}

.controls{display:flex;gap:.6rem;justify-content:flex-end;margin:.2rem 0 1rem}
.btn{background:#fff;color:var(--fg);border:1px solid var(--line)}
.btn:hover{border-color:rgba(0,0,0,.3)}
.btn.active{background:#0a0a0a;color:#fff;border-color:#0a0a0a}

.section{margin:1.2rem 0;content-visibility:auto;contain-intrinsic-size:1px 800px}

.aei-embed{position:relative;width:100%;min-height:60vh;border:1px solid var(--line);border-radius:var(--radius);overflow:hidden;background:#fff}
.aei-stage{position:relative;width:100%;height:100%;min-height:60vh;touch-action:none}
.aei-lines{position:absolute;inset:0;width:100%;height:100%;pointer-events:none}

.aei-block{width:var(--aei-block);height:var(--aei-block);position:absolute;background:#fff;border:1px solid var(--line);border-radius:10px;overflow:hidden;opacity:.95;cursor:grab;user-select:none;transition:opacity .2s var(--ease)}
.aei-block:active{cursor:grabbing}
.aei-block:hover{opacity:1}

.aei-grid4{display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(2,1fr);width:100%;height:100%}
.aei-grid4>*{width:100%;height:100%;object-fit:cover;background:#fff}

.aei-caption{position:absolute;left:0;right:0;bottom:0;padding:6px 8px;border-top:1px solid var(--line);font-size:10px;line-height:1.2;background:rgba(237, 250, 255, 0.221)}
@media (prefers-color-scheme: dark){ .aei-caption{background:rgba(0, 0, 0, 0.11)} }
.aei-caption strong{font-weight:600}
.aei-caption .meta{opacity:.75;font-style:italic}

.listado{border:1px solid var(--line);border-radius:var(--radius);overflow:hidden}
details.proj{border-top:1px solid var(--line)}
details.proj summary{padding:.8rem 1rem;cursor:pointer;list-style:none;display:flex;justify-content:space-between;gap:.8rem}
details.proj summary::-webkit-details-marker{display:none}
.p-title{font-size:1rem;text-transform:lowercase}
.p-meta{font-size:.9rem;opacity:.72;font-style:italic}
.p-media{padding:.6rem 1rem 1rem;display:grid;gap:.5rem;grid-template-columns:repeat(4,minmax(0,1fr))}
.p-media img,.p-media video{width:100%;aspect-ratio:1/1;object-fit:cover;background:#fff;border:1px solid var(--line)}
@media (max-width:900px){.p-media{grid-template-columns:repeat(2,minmax(0,1fr))}}
.p-link{margin-top:.3rem;font-size:.75rem;opacity:.72;font-style:italic;display:block;text-align:left;padding:0 1rem 1rem}
.p-link a{color:inherit;text-decoration:none;border-bottom:1px solid transparent;transition:border-color .2s,opacity .2s}
.p-link a:hover{border-bottom-color:currentColor;opacity:1}

.p-title,.p-meta,.proj summary, .language-selector button{ color: var(--fg); }
.proj{ border-bottom:1px solid var(--line); }
.p-link a{ color: var(--fg); }

.p-link.aei-link{
  padding:0 !important;      /* elimina el corrimiento */
  margin:.15rem 0 0 0;
  text-align:left;
  font-size:.68rem;
  opacity:.65;
  font-style:italic;    }

/* perf hints */
.aei-block{ will-change: transform; }
#aeiLines{ contain: strict; }

</style>
</head>
<body>
<header>
  <a href="https://xpan.earth" aria-label="xpan"><img src="xpan.svg" alt="xpan" fetchpriority="high" decoding="async"></a>
  <nav class="language-selector" role="navigation" aria-label="selector de idioma">
    <button data-lang="es" class="active" aria-pressed="true">es</button>
    <button data-lang="en" aria-pressed="false">en</button>
    <button data-lang="fr" aria-pressed="false">fr</button>
    <button data-lang="jp" aria-pressed="false">jp</button>
  </nav>
</header>

<main>
  <section class="lang lang-es">
    <h1>mdtc.xpan.ep.1 — index</h1>
    <div class="meta">2024–2025 — ciudad de méxico — espacio público uno</div>
    <div class="description">xpan.ep.1 [espacio público uno] fue un proyecto desarrollado por xpan entre octubre de 2024 y febrero de 2025. su estructura, basada en una retícula de poros, configuró un sistema modular y adaptable capaz de albergar múltiples usos y escalas. durante este periodo operó como espacio público activo, abierto a distintas comunidades, con el objetivo de articular nuevas posibilidades dentro de la topología conectiva. en cinco meses se realizaron más de 18 activaciones públicas. por su ubicación —en una de las zonas con mayor tránsito peatonal de la ciudad de méxico— se estima que entre 2,5 y 3 millones de personas pudieron haber transitado frente o a través de la instalación durante su operación. xpan.ep.1 materializó redes permanentes y experimentaciones culturales que expandieron las conexiones entre prácticas, contextos y comunidades diversas.</div>
  </section>

  <section class="lang lang-en" style="display:none;">
    <h1>mdtc.xpan.ep.1 — index</h1>
    <div class="meta">2024–2025 — mexico city — espacio público uno</div>
    <div class="description">xpan.ep.1 [espacio público uno] was a project developed by xpan between october 2024 and february 2025. its structure, based on a porous grid, formed a modular and adaptable system capable of hosting multiple uses and scales. during this period, it operated as an active public space, open to different communities, with the aim of articulating new possibilities within the connective topology. over five months, more than 18 public activations took place. due to its location—in one of the areas with the highest pedestrian traffic in mexico city—it is estimated that between 2.5 and 3 million people may have passed in front of or through the installation during its operation. xpan.ep.1 materialized permanent networks and cultural experimentations that expanded connections between diverse practices, contexts, and communities.</div>
  </section>

  <section class="lang lang-fr" style="display:none;">
    <h1>mdtc.xpan.ep.1 — index</h1>
    <div class="meta">2024–2025 — mexico — espace public un</div>
    <div class="description">xpan.ep.1 [espacio público uno] a été un projet développé par xpan entre octobre 2024 et février 2025. sa structure, basée sur une grille poreuse, a constitué un système modulaire et adaptable capable d'accueillir de multiples usages et échelles. pendant cette période, il a fonctionné comme un espace public actif, ouvert à différentes communautés, avec pour objectif d'articuler de nouvelles possibilités au sein de la topologie connective. en cinq mois, plus de 18 activations publiques ont eu lieu. en raison de son emplacement—dans l'une des zones à plus forte circulation piétonne de mexico—on estime que 2,5 à 3 millions de personnes ont pu passer devant ou à travers l'installation durant son fonctionnement. xpan.ep.1 a matérialisé des réseaux permanents et des expérimentations culturelles qui ont élargi les connexions entre pratiques, contextes et communautés diverses.</div>
  </section>

  <section class="lang lang-jp" style="display:none;">
    <h1>mdtc.xpan.ep.1 — index</h1>
    <div class="meta">2024–2025 — メキシコシティ — 公共空間一</div>
    <div class="description">xpan.ep.1［espacio público uno］は、2024年10月から2025年2月にかけてxpanが開発したプロジェクトです。多孔グリッド構造を基盤とし、複数の用途やスケールに対応可能なモジュール式で適応性の高いシステムを構成しました。この期間、公共スペースとして積極的に運営され、異なるコミュニティに開かれ、接続的トポロジー内で新たな可能性を構築することを目的としました。5か月間で18回以上の公開アクティベーションが実施されました。メキシコシティで最も歩行者通行量の多い地域の一つに位置するため、稼働期間中に250万～300万人がこのインスタレーションの前や内部を通過したと推定されます。xpan.ep.1は、多様な実践・文脈・コミュニティ間のつながりを拡張する永続的なネットワークと文化的実験を具現化しました。</div>
  </section>

  <div class="controls" role="tablist" aria-label="selector de vista">
    <button class="btn" id="btn-aei" aria-selected="true">vista a.e.i.</button>
    <button class="btn" id="btn-list" aria-selected="false">vista listado</button>
  </div>

  <section class="section" id="exp_aei" aria-label="a.e.i embebido">
    <div class="aei-embed" id="aeiEmbed">
      <svg class="aei-lines" id="aeiLines" width="100%" height="100%"></svg>
      <div class="aei-stage" id="aeiStage" aria-label="escena a.e.i"></div>
    </div>
  </section>

  <section class="section" id="listado_wrap" style="display:none;">
    <div class="listado" id="listado"></div>
  </section>
</main>

<script>
/* i18n */
function setLang(lang){
  localStorage.setItem('lang', lang);
  document.querySelectorAll('.lang').forEach(el=>{
    el.style.display = el.classList.contains(`lang-${lang}`) ? 'block' : 'none';
  });
  document.querySelectorAll('.language-selector button').forEach(btn=>{
    const on = btn.dataset.lang===lang;
    btn.classList.toggle('active', on);
    btn.setAttribute('aria-pressed', String(on));
  });
}
document.querySelector('.language-selector').addEventListener('click', (e)=>{
  const b = e.target.closest('button[data-lang]'); if(!b) return; setLang(b.dataset.lang);
});
setLang(localStorage.getItem('lang') || 'es');

/* datos */
const projects = [
  {
    id:'p00',
    title:'atlas.1 — inauguración de xpan.ep.1',
    date:'17 de octubre de 2024',
    location:'ciudad de méxico',
    link:'mdtc_xpan.ep.1_activaciones/atlas.1_inauguracion_de_xpan.ep.1.html',
    media:[
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38749139/original_e83b96234eefa7ffe35f41eac701d9d0.jpg?1755036234?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38749146/original_24951cffb3b1a188562edefc0c66ea3b.jpg?1755036235?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38749145/original_19b3b5ba81600bf95c0cff3fa3bd6e61.jpg?1755036237?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38749145/original_19b3b5ba81600bf95c0cff3fa3bd6e61.jpg?1755036237?bc=0'}
    ]
  },
  
  {
    id:'p02',
    title:'sacrifice redemption — chelsea alcerreca (parte.1)',
    date:'29 de diciembre de 2024',
    location:'ciudad de méxico',
    link:'mdtc_xpan.ep.1_activaciones/sacrifice_redemption_chelsea_alcerreca_parte.1.html',
    media:[
        {type:'video', src:'https://attachments.are.na/38770339/c2ce2b05104f0b83d657b406d652c873.mp4?1755114189'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38770347/original_5ee14a62a44b50f2613a4d6d6bf85e44.jpg?1755114198?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38770343/original_e6fe3c33fbd5a885d5fe0822cf3ceeac.jpg?1755114197?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38770368/original_15fc61f4b943ae14f603b9eaa46ff0c2.jpg?1755114203?bc=0'}
    ]
  },
  {
    id:'p03',
    title:'niños en guerra',
    date:'15 de noviembre de 2024',
    location:'ciudad de méxico',
    link:'mdtc_xpan.ep.1_activaciones/ninos_en_guerra.html',
    media:[
      {type:'video', src:'https://attachments.are.na/38749499/d184f2d34ce2f4b30f75320e93dfb4d3.mp4?1755037130'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38749510/original_32bd31c207a6fe9aee6f991cb721e988.jpg?1755037146?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38749515/original_dbd317dbfa758825f1c3bcb0984c5fc2.jpg?1755037147?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38749517/original_50fb3eadf39a495ff16201e9ae1b9864.jpg?1755037147?bc=0'}
    ]
  },
  {
    id:'p04',
    title:'maison des orphelins',
    date:'6 de diciembre del 2024',
    location:'ciudad de méxico',
    link:'mdtc_xpan.ep.1_activaciones/maison_des_orphelins.html',
    media:[
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38749966/original_16a25681d656eea6531e4b23e34a51ce.png?1755038352?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38750013/original_c81a97da9e83fb0068047b7fe542278c.jpg?1755038449?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38750015/original_fdf5151a5837e7b775ba6b6596920329.jpg?1755038450?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38750017/original_8ff84139a50881bf58b5e9eee062dc1b.jpg?1755038450?bc=0'}
    ]
  },
  {
    id:'p05',
    title:'misha',
    date:'22 de noviembre de 2024',
    location:'ciudad de méxico',
    link:'mdtc_xpan.ep.1_activaciones/misha.html',
    media:[
      {type:'video', src:'https://attachments.are.na/38750188/1e42bb258556a52b6877e596e5e906db.mp4?1755039396'}
    ]
  },
  {
    id:'p06',
    title:'empire libre — showcase lounge',
    date:'02 de noviembre de 2024',
    location:'ciudad de méxico',
    link:'mdtc_xpan.ep.1_activaciones/empire_libre_showcase_lounge.html',
    media:[
      {type:'video', src:'https://attachments.are.na/38750425/3d8cc16093f20b3cb085f239f8a95003.mp4?1755040135'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38750470/original_91836b15d6ea6f8128078d7e13562270.png?1755040229?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38750469/original_2e882a54aec67ec4eb3661c492e440c6.png?1755040229?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38750462/original_4fcc01fd1bb03a2b2ba4e4fae3badfd1.png?1755040227?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38750461/original_f54bfc11dbec7082fa3264b2db5ffcbc.png?1755040227?bc=0'}
    ]
  },
  {
    id:'p07',
    title:'eden blood supply',
    date:'17 de diciembre de 2024',
    location:'ciudad de méxico',
    link:'mdtc_xpan.ep.1_activaciones/eden_blood_supply.html',
    media:[
      {type:'video', src:'https://attachments.are.na/38748969/2c8b22530334939ac5e12164156be1e7.mov?1755035769'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38748990/original_58099ccd2ed6d7e2b1afcd1702f4db7d.jpg?1755035825?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38748991/original_6ae1b9fef4f13e2873fd03f6a12d0b34.jpg?1755035825?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38748998/original_7528278cde3a106dc2cbbb18ba709321.jpg?1755035826?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38749001/original_d56c6b3348478552a716421f00ba07d1.jpg?1755035828?bc=0'}
    ]
  },
  {
    id:'p08',
    title:'universal space jam',
    date:'31 de octubre de 2024',
    location:'ciudad de méxico',
    link:'mdtc_xpan.ep.1_activaciones/universal_space_jam.html',
    media:[
      {type:'video', src:'https://attachments.are.na/38749225/ab4a568ebeb93d2d8c2bed4bab95a011.mp4?1755036485'},
      {type:'video', src:'https://attachments.are.na/38749228/859edd924313d38472a167d8477a54c1.mov?1755036490'},
      {type:'video', src:'https://attachments.are.na/38749233/a9636c13df5a90b7f3aa32186194ee99.mov?1755036513'}
    ]
  },
  {
    id:'p09',
    title:'resurrected',
    date:'18 de diciembre de 2024',
    location:'ciudad de méxico',
    link:'mdtc_xpan.ep.1_activaciones/resurrected.html',
    media:[
      {type:'video', src:'https://attachments.are.na/38749811/be19410241542b9cb9c9ace486fffd1f.mp4?1755037812'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38749815/original_5f42fc8eeaade53505908e67595c00cf.jpg?1755037828?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38749821/original_7536378c1b11998f3a8814f6143e87d7.jpg?1755037829?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38749828/original_f01cf4eab4bfd825b23d2a0fb89dde30.jpg?1755037832?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38749830/original_f9becc85533b816ac5aff4292f431801.jpg?1755037832?bc=0'}
    ]
  },
  {
    id:'p10',
    title:'louis f cota & d56i3e7',
    date:'16 de noviembre de 2024',
    location:'ciudad de méxico',
    link:'mdtc_xpan.ep.1_activaciones/louis_f_cota_d56i3e7.html',
    media:[
      {type:'video', src:'https://attachments.are.na/38750117/607ecb8a6c1d9b3818518017cc8b7259.mp4?1755038884'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38750118/original_b15629f1f32667b3827e99ccabe22755.jpg?1755038889?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38750120/original_9e0ed24bdbf688555721ea3e48d0ac63.gif?1755038890?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38750122/original_be4f9568873e6a66e956ab472dd51f0a.gif?1755038891?bc=0'}
    ]
  },
  {
    id:'p11',
    title:'otvaal <> cculdesacc <> xpan — harcha showcase [ mdtc.6 ]',
    date:'25 de abril del 2025',
    location:'ciudad de méxico',
    link:'mdtc_xpan.ep.1_activaciones/otvaal_cculdesacc_xpan_harcha_showcase_mdtc.6.html',
    media:[
      {type:'video', src:'https://attachments.are.na/38750211/3627cb038c3789ddab9b17ed70b0ac3c.mov?1755039558'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38750217/original_73468d1faece7152e4543b988abbf579.jpg?1755039571?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38750218/original_dae065249ce4638712c322b4ed9bbae4.jpg?1755039572?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38750220/original_3168fe415a83c8662fdfc77218e72020.jpg?1755039572?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38750219/original_03e4b4f63439f1f829be52e9451c88a5.jpg?1755039572?bc=0'}
    ]
  },
  {
    id:'p12',
    title:'paglieri — presentación de álbum “ruido”',
    date:'04 de noviembre de 2024',
    location:'ciudad de méxico',
    link:'mdtc_xpan.ep.1_activaciones/paglieri_presentacion_de_album_ruido.html',
    media:[
      {type:'video', src:'https://attachments.are.na/38771863/247e41ac93dd72c52b682082364c45af.mp4?1755116824'},
      {type:'video', src:'https://attachments.are.na/38771858/503f4b6f1a4331a643c3e52ffdb1842f.avi?1755116814'},
      {type:'video', src:'https://attachments.are.na/38771844/c5dce88593fef988c389f2813468d8c3.avi?1755116799'},
      {type:'video', src:'https://attachments.are.na/38771790/45277b77130158a216ff780b4476ba6c.avi?1755116764'},
      {type:'video', src:'https://attachments.are.na/38771784/472a6d8e0b873887b7b4a741c5349b79.avi?1755116760'}
    ]
  },
  {
    id:'p13',
    title:'ía — performance',
    date:'04 de febrero de 2025',
    location:'ciudad de méxico',
    link:'mdtc_xpan.ep.1_activaciones/ia_performance.html',
    media:[
      {type:'video', src:'https://attachments.are.na/38772161/6ecbf91dbe418731d41a5e2e7a673330.mp4?1755117291'}
    ]
  },
  {
    id:'p14',
    title:'profesor trumane — taller de dibujo sobre mesa microfoneada y amplificada',
    date:'09 de noviembre de 2025',
    location:'ciudad de méxico',
    link:'mdtc_xpan.ep.1_activaciones/profesor_trumane_taller_dibujo_mesa_microfoneada_amplificada.html',
    media:[
      {type:'video', src:'https://attachments.are.na/38772609/6cde1e346b5aa2f2dd7f802d9ad51a94.mov?1755118469'},
      {type:'video', src:'https://attachments.are.na/38772610/b8c811f92108574f94cf683f8d3b8d00.mov?1755118470'},
      {type:'video', src:'https://attachments.are.na/38772611/1a0e7c967427b6e982f4c80c13859cf2.mov?1755118470'},
      {type:'video', src:'https://attachments.are.na/38772612/c09de58342f64375de25ee96ded04ea1.mov?1755118470'}
    ]
  },
   {
    id:'p15',
    title:'performance “trazo”',
    date:'17 de febrero de 2024',
    location:'ciudad de méxico',
    link:'mdtc_xpan.ep.1_activaciones/performance_trazo.html',
    media:[
      {type:'video', src:'https://attachments.are.na/38772720/7d21f211394470f3e99177a43d6b8223.mp4?1755118707'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38772726/original_252434c9fb706c8b2cb121b7c7a41965.jpg?1755118716?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38772730/original_fd7631b35caadefb41b2851c86475ccf.jpg?1755118721?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38772740/original_79014017f9a1c25a8f48e097fca79f26.jpg?1755118724?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38772741/original_01920f5ea8ad47a7df808342b1aa89d0.jpg?1755118726?bc=0'}
    ]
  },
  {
    id:'p16',
    title:'od beauty — lanzamiento de marca',
    date:'29 de noviembre de 2024',
    location:'ciudad de méxico',
    link:'mdtc_xpan.ep.1_activaciones/od_beauty_lanzamiento_de_marca.html',
    media:[
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38750797/original_11922d6f290bcae8e4be62a8600ec78d.jpg?1755042062?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38750762/original_9a693dd7b5ad4809139ab83c38c7576e.png?1755041842?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38750758/original_19f2dab6751c277d2822ad84f9ca0a80.png?1755041840?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38750759/original_1fde67d5edbaf164262aa30111c8a714.png?1755041841?bc=0'}
    ]
  },
   {
    id:'p17',
    title:'mugler showcase',
    date:'20 de diciembre de 2024',
    location:'ciudad de méxico',
    link:'mdtc_xpan.ep.1_activaciones/mugler_showcase.html',
    media:[
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38771267/original_5716a5aaf10eed93c4a3e108c17cecee.jpg?1755115915?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38771268/original_79d5636faeecdbc689981e38bdf3494c.jpg?1755115915?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38771263/original_d9b6710dddd116f36c8c9758d0f821ca.jpg?1755115913?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38771296/original_059df7a5bdeb7946d51d28a05735f238.jpg?1755115960?bc=0'}
    ]
  },
  {
    id:'p18',
    title:'atlas.2',
    date:'15 de mayo de 2025',
    location:'ciudad de méxico',
    link:'mdtc_xpan.ep.1_activaciones/atlas.2.html',
    media:[
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38770855/original_2bcba2002b57efaf2454a2d6720b8712.jpg?1755115078?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38770856/original_c26cf80c79b2d54450abb66457bd59b9.jpg?1755115081?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38770857/original_693c7c76ac35448639d0d8f242ea68c7.jpg?1755115078?bc=0'},
      {type:'image', src:'https://d2w9rnfcy7mm78.cloudfront.net/38770859/original_3c1121168346fbf0c409f34418a6aeb9.jpg?1755115078?bc=0'}
    ]
  }
  ];

/* red y video controls */
const BLANK_POSTER='data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=';
const MAX_CONCURRENT=8; let activeLoads=0; const loadQueue=[];

function wireVideoEl(v){
  v.muted = true;
  v.loop = true;
  v.autoplay = true;
  v.playsInline = true;
  v.disableRemotePlayback = true;
  v.setAttribute('muted','');
  v.setAttribute('autoplay','');
  v.setAttribute('playsinline','');
  v.setAttribute('webkit-playsinline','');
  v.controls = false;
  v.preload = 'metadata';
  if(!v.poster) v.poster = BLANK_POSTER;
}

function scheduleVideoLoad(v,url){
  loadQueue.push({v,url}); pumpLoads();
}
function pumpLoads(){
  while(activeLoads<MAX_CONCURRENT && loadQueue.length){
    const {v,url}=loadQueue.shift();
    activeLoads++;
    v.src=url;
    v.preload='metadata';
    const done=()=>{activeLoads--; pumpLoads();};
    v.addEventListener('loadedmetadata',done,{once:true});
    v.addEventListener('error',done,{once:true});
    try{ v.load(); }catch(_){
      done();
    }
  }
}
function autoplayWhenVisible(v){
  const tryPlay=()=>v.play().catch(()=>{});
  const vio=new IntersectionObserver(ents=>{
    ents.forEach(en=>{
      if(en.isIntersecting){
        if(!v.src){
          const url = v.dataset && v.dataset.src ? v.dataset.src : v.src;
          if(url) scheduleVideoLoad(v, url);
        }
        tryPlay();
      } else {
        v.pause();
      }
    });
  },{threshold:.10});
  vio.observe(v);
  document.addEventListener('visibilitychange',()=>{ if(document.visibilityState==='visible') tryPlay(); });
}


/* imágenes eager críticas */
function eagerImg(src){
  const img=document.createElement('img');
  img.alt='';
  img.decoding='async';
  img.loading='eager';
  img.fetchPriority='high';
  img.src=src;
  return img;
}

/* a.e.i */
const stage=document.getElementById('aeiStage');
const linesSVG=document.getElementById('aeiLines');

function renderAEI(){
  stage.innerHTML=''; 
  linesSVG.innerHTML='';
  stage.style.contain = 'content';
  const blocks=[]; 
  let pairs=[]; 
  let lastPairUpdate=0;



  projects.forEach(p=>{
    const block=document.createElement('div'); block.className='aei-block'; block.id=p.id;
    const grid=document.createElement('div'); grid.className='aei-grid4'; block.appendChild(grid);

    const mediaAll = (p.media||[]).filter(m=>m&&m.src);
    const m4 = mediaAll.slice(0,4);
    while(m4.length<4 && mediaAll.length>0) m4.push(mediaAll[m4.length % mediaAll.length]);

    m4.forEach(m=>{
      if(m.type==='video'){
        const v=document.createElement('video'); wireVideoEl(v);
        if(m.poster) v.poster=m.poster;
        grid.appendChild(v);
        scheduleVideoLoad(v, m.src);
        autoplayWhenVisible(v);
      } else {
        grid.appendChild(eagerImg(m.src));
      }
    });

    const cap=document.createElement('div'); cap.className='aei-caption';
   cap.innerHTML = `<strong>${p.title||''}</strong>`+
  `<div class="meta">${p.date||''}${p.location?` — ${p.location}`:''}</div>`+
  `${p.link ? `<div class="p-link aei-link"><a href="${p.link}">ver proyecto</a></div>` : ''}`;


    block.appendChild(cap);

    stage.appendChild(block);

    // posición y movimiento
    const r=stage.getBoundingClientRect(); const bw=parseFloat(getComputedStyle(block).width); const bh=parseFloat(getComputedStyle(block).height);
    block.x=Math.random()*Math.max(10,r.width-bw); block.y=Math.random()*Math.max(10,r.height-bh);
    block.vx=(Math.random()-.5)*0.35; block.vy=(Math.random()-.5)*0.35;
    updateBlock(block); makeDraggable(block); blocks.push(block);
  });

  function updateBlock(b){ b.style.transform=`translate3d(${b.x}px,${b.y}px,0)`; }
  function clamp(b){ const r=stage.getBoundingClientRect(); const bw=parseFloat(getComputedStyle(b).width); const bh=parseFloat(getComputedStyle(b).height); b.x=Math.min(Math.max(0,b.x), Math.max(0,r.width-bw)); b.y=Math.min(Math.max(0,b.y), Math.max(0,r.height-bh)); }
  function makeDraggable(el){ let drag=false,lx=0,ly=0; const mv=(cx,cy)=>{ const dx=cx-lx, dy=cy-ly; el.x+=dx; el.y+=dy; clamp(el); updateBlock(el); lx=cx; ly=cy; drawLines(); };
    el.addEventListener('mousedown',e=>{e.preventDefault(); drag=true; lx=e.clientX; ly=e.clientY;});
    window.addEventListener('mousemove',e=>{ if(drag) mv(e.clientX,e.clientY); });
    window.addEventListener('mouseup',()=>{ drag=false; });
    el.addEventListener('touchstart',e=>{ const t=e.touches[0]; drag=true; lx=t.clientX; ly=t.clientY; },{passive:true});
    el.addEventListener('touchmove',e=>{ if(!drag) return; e.preventDefault(); const t=e.touches[0]; mv(t.clientX,t.clientY); },{passive:false});
    el.addEventListener('touchend',()=>{ drag = false; });
  }

  function centers(){ return [...stage.querySelectorAll('.aei-block')].map(b=>{ const r=b.getBoundingClientRect(); return {b, x:b.x + r.width/2, y:b.y + r.height/2}; }); }
  function redrawPairs(){ const cs=centers(); const out=[]; for(let i=0;i<cs.length;i++){ for(let j=i+1;j<cs.length;j++){ if(Math.random()<0.08) out.push([cs[i],cs[j]]); } } return out; }
  function drawLines(){ linesSVG.innerHTML=''; pairs.forEach(([a,b])=>{ const line=document.createElementNS('http://www.w3.org/2000/svg','line'); line.setAttribute('x1',a.x); line.setAttribute('y1',a.y); line.setAttribute('x2',b.x); line.setAttribute('y2',b.y); line.setAttribute('stroke','currentColor'); line.setAttribute('stroke-width','.6'); line.setAttribute('opacity','.18'); linesSVG.appendChild(line); }); }

  function step(){
    const r=stage.getBoundingClientRect();
    [...stage.querySelectorAll('.aei-block')].forEach(b=>{
      b.x+=b.vx; b.y+=b.vy;
      const bw=parseFloat(getComputedStyle(b).width), bh=parseFloat(getComputedStyle(b).height);
      if(b.x<0||b.x>r.width-bw) b.vx*=-1;
      if(b.y<0||b.y>r.height-bh) b.vy*=-1;
      clamp(b); updateBlock(b);
    });
    if(performance.now()-lastPairUpdate>500){ pairs=redrawPairs(); lastPairUpdate=performance.now(); }
    drawLines(); requestAnimationFrame(step);
  }
  step();

  window.addEventListener('resize',()=>{ [...stage.querySelectorAll('.aei-block')].forEach(b=>{ clamp(b); updateBlock(b); }); drawLines(); },{passive:true});
}

function renderList(container){
  container.innerHTML = projects.map(p=>{
    const media=(p.media||[]).filter(m=>m&&m.src).slice(0,4).map(m=> m.type==='video'
? `<video muted playsinline preload="metadata" data-src="${m.src}" poster="${m.poster||BLANK_POSTER}"></video>`
      : `<img src="${m.src}" alt="">`
    ).join('');
    return `<details class="proj">
      <summary><span class="p-title">${p.title||''}</span><span class=\"p-meta\">${p.date||''}${p.location?` — ${p.location}`:''}</span></summary>
      <div class="p-media">${media}</div>
      
      ${p.link ? `<div class=\"p-link\"><a href=\"${p.link}\">ver proyecto</a></div>` : ''}
    </details>`;
  }).join('');
container.querySelectorAll('video').forEach(v=>{
  wireVideoEl(v);
  // carga y play solo cuando entra a viewport
  autoplayWhenVisible(v);
});
}

/* autoplay + selector vista */
function hardAutoplayAll(){
  document.querySelectorAll('#aeiStage video, #listado_wrap video').forEach(v=>{
    v.play().catch(()=>{});
  });
}

const btnAEI=document.getElementById('btn-aei');
const btnList=document.getElementById('btn-list');
const aeiWrap=document.getElementById('exp_aei');
const listWrap=document.getElementById('listado_wrap');

function setView(view){
  const isAEI = view==='aei';
  aeiWrap.style.display = isAEI ? 'block' : 'none';
  listWrap.style.display = isAEI ? 'none' : 'block';
  btnAEI.classList.toggle('active', isAEI);
  btnList.classList.toggle('active', !isAEI);
  btnAEI.setAttribute('aria-selected', String(isAEI));
  btnList.setAttribute('aria-selected', String(!isAEI));
  localStorage.setItem('mdtc_view', view);
  hardAutoplayAll();
}

btnAEI.addEventListener('click', ()=> setView('aei'));
btnList.addEventListener('click', ()=> setView('list'));

function boot(){
  renderAEI();
  renderList(document.getElementById('listado'));
  const saved = localStorage.getItem('mdtc_view') || 'aei';
  setView(saved);

  // más gestos y sin "once" para insistir
  ['pointerdown','touchstart','scroll','visibilitychange','keydown','wheel','mousemove'].forEach(ev=>{
    window.addEventListener(ev, hardAutoplayAll, { passive:true });
  });
  window.addEventListener('focus', hardAutoplayAll);
  window.addEventListener('pageshow', hardAutoplayAll);

  // reintentos escalonados
  [300,900,2000,3500,6000,10000,15000].forEach(t=>setTimeout(hardAutoplayAll, t));

  // si aparecen nodos nuevos, intentar otra vez
  const mo=new MutationObserver(()=>hardAutoplayAll());
  mo.observe(document.body,{subtree:true,childList:true});
}

document.addEventListener('DOMContentLoaded', boot);
</script>
<script src="../assets/js/video-autoplay-mobile.js" defer></script>
</body>
</html>