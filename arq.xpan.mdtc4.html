<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>mdtc.4 [ eden garden cinema ] — arquitectura</title>
  <style>
    body {
      margin: 0;
      background: #fff;
      font-family: 'Times New Roman', serif;
      color: #000;
    }

    header {
      position: fixed;
      top: 1rem;
      left: 1rem;
      z-index: 10;
    }

    header img {
      width: 50px;
      height: auto;
    }

    .lang-switcher {
      position: fixed;
      top: 1rem;
      right: 1rem;
      z-index: 10;
      font-size: 0.9rem;
    }

    .lang-switcher button {
      background: none;
      border: none;
      font-family: 'Times New Roman', serif;
      cursor: pointer;
      margin-left: 0.5rem;
      text-transform: lowercase;
    }

    .lang-switcher button.active {
      text-decoration: underline;
    }

    .container {
      max-width: 1000px;
      margin: 7rem auto 4rem;
      padding: 0 1.5rem;
    }

    h1 {
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
      text-transform: lowercase;
    }

    .meta {
      font-size: 0.85rem;
      opacity: 0.5;
      font-style: italic;
      margin-bottom: 1.5rem;
    }

    .description {
      font-size: 1rem;
      line-height: 1.6;
      max-width: 700px;
      margin-bottom: 2rem;
      display: none;
    }

    .description.active {
      display: block;
    }

    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 0.5rem;
      margin-bottom: 2rem;
    }

    .gallery img,
    .gallery video {
      width: 100%;
      max-height: 300px;
      object-fit: contain;
      border-radius: 2px;
      display: block;
      aspect-ratio: auto;
    }

    .pdf-embed iframe {
      width: 100%;
      height: 600px;
      border: none;
      border-radius: 4px;
      margin-bottom: 2rem;
    }

    .xpan-audio-block {
      border: 1px solid black;
      padding: 1rem;
      margin-bottom: 3rem;
    }

    .audio-meta .title {
      font-size: 1rem;
      font-weight: bold;
      text-transform: lowercase;
      margin-bottom: 0.2rem;
    }

    .audio-meta .info {
      font-size: 0.85rem;
      opacity: 0.6;
      margin-bottom: 1rem;
    }

    .audio-controls {
      display: flex;
      align-items: center;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .play-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      text-transform: lowercase;
      padding: 0.4rem 0.6rem;
    }

    .time-display {
      font-size: 0.85rem;
      min-width: 60px;
    }

    .progress-container {
      position: relative;
      flex-grow: 1;
      height: 2px;
      background: #ddd;
      cursor: pointer;
      touch-action: none;
    }

    .progress-fill {
      height: 2px;
      background: black;
      width: 0%;
    }

    canvas {
      width: 100%;
      height: 100px;
      display: block;
      margin-top: 1rem;
      background: white;
    }

    .tooltip {
      position: absolute;
      font-size: 0.75rem;
      background: black;
      color: white;
      padding: 0.2rem 0.4rem;
      border-radius: 3px;
      transform: translateX(-50%);
      top: -1.5rem;
      display: none;
      pointer-events: none;
      z-index: 100;
    }

    @media (prefers-color-scheme: dark) {
      body { background: black; color: white; }
      .xpan-audio-block { border-color: white; }
      .progress-container { background: #666; }
      .progress-fill { background: white; }
      canvas { background: black; }
      .tooltip { background: white; color: black; }
      .play-button { color: white; }
      header img { filter: invert(1); }
      .lang-switcher button { color: white; }
    }

    @media (max-width: 768px) {
      .container {
        margin-top: 6rem;
        padding: 0 1rem;
      }
      .audio-controls {
        flex-direction: column;
        align-items: flex-start;
      }
      .pdf-embed iframe {
        height: auto;
        aspect-ratio: 4 / 3;
      }
    }
  </style>
</head>
<body>
  <header>
    <a href="https://xpan.earth" target="_blank">
      <img src="xpan.svg" alt="xpan logo" />
    </a>
  </header>

  <div class="lang-switcher">
    <button onclick="switchLang('es')" class="active">es</button>
    <button onclick="switchLang('en')">en</button>
    <button onclick="switchLang('fr')">fr</button>
    <button onclick="switchLang('jp')">jp</button>
  </div>

  <div class="container">
    <h1>mdtc.4 [ eden garden cinema ]</h1>
    <div class="meta">abril 2025 — hotel reforma, ciudad de méxico</div>

    <!-- descripciones multilngües -->
    <div class="description active" lang="es">[
      intervención espacial desarrollada por xpan junto a mario alore y eli pastore.<br><br>
      estructura principal: estrella de seis puntas construida con 132 reflectores de alta intensidad, unidos mediante cable de acero. el conjunto —de más de 3 metros de diámetro— fue suspendido en el centro del espacio. su trazo continuo forma una figura cerrada y expansiva. la proyección lumínica es directa, sin dispersión: genera un volumen denso, agresivo y frontal.<br><br>
      el sistema se completa con una lámina de aluminio pulido alineada al centro geométrico de la estrella, y un mixtape en reproducción continua.<br><br>
      el público accede a memorias usb metálicas con el audio. cada unidad está diseñada con una punta afilada, permitiendo inscribir trazos sobre la lámina. los desplazamientos físicos durante la escucha activan un protocolo de intervención: gesto, vibración y registro convergen en un único plano.<br><br>
      este proyecto define una plataforma de exposición extrema, donde la memoria se acumula como residuo material.
    ]</div>
    <div class="description" lang="en">[
      spatial intervention developed by xpan with mario alore and eli pastore.<br><br>
      main structure: six-pointed star built with 132 high-intensity reflectors, connected by steel cable. the assembly —over 3 meters in diameter— was suspended at the center of the space. its continuous stroke forms a closed and expansive figure. light projection is direct, without dispersion: it generates a dense, aggressive, and frontal volume.<br><br>
      the system is completed by a polished aluminum sheet aligned to the geometric center of the star, and a mixtape in continuous playback.<br><br>
      the audience receives metallic usb drives with the audio. each unit is designed with a sharp tip, enabling inscriptions on the sheet. physical movement during listening activates an intervention protocol: gesture, vibration, and trace converge on a single plane.<br><br>
      this project defines a platform of extreme exhibition, where memory accumulates as material residue.
   ]</div>
    <div class="description" lang="fr">[
      intervention spatiale développée par xpan avec mario alore et eli pastore.<br><br>
      structure principale : étoile à six branches construite avec 132 projecteurs haute intensité, reliés par des câbles en acier. l’ensemble — de plus de 3 mètres de diamètre — était suspendu au centre de l’espace. son tracé continu forme une figure fermée et expansive. la projection lumineuse est directe, sans dispersion : elle génère un volume dense, agressif et frontal.<br><br>
      le système est complété par une feuille d’aluminium poli alignée au centre géométrique de l’étoile, et une mixtape diffusée en boucle.<br><br>
      le public reçoit des clés usb métalliques contenant l’audio. chaque unité est conçue avec une pointe acérée, permettant de tracer sur la feuille. les déplacements physiques pendant l’écoute activent un protocole d’intervention : geste, vibration et inscription convergent sur un même plan.<br><br>
      ce projet définit une plateforme d’exposition extrême, où la mémoire s’accumule en tant que résidu matériel.
    ]</div>
    <div class="description" lang="jp">[
      空間インスタレーションは、xpanがmario aloreおよびeli pastoreと共同で開発。<br><br>
      主構造は132個の高強度リフレクターで構成され、スチールケーブルで接続された六芒星。直径3メートル以上の構造体が空間中央に吊るされ、連続的な軌跡が閉じた拡張形態を形成する。光の投影は拡散せず直接的で、密度が高く攻撃的で正面から迫るようなボリュームを生み出す。<br><br>
      システムは、幾何学的中心に配置された研磨アルミニウム板と、連続再生されるミックステープで構成される。<br><br>
      観客は音源が収録された金属製USBを受け取り、それぞれのデバイスには鋭い先端があり、アルミ板に刻みを入れることができる。鑑賞中の身体的な移動が、介入のプロトコルを起動させる：ジェスチャー、振動、記録が一つの平面に収束する。<br><br>
      本プロジェクトは、記憶が物質的残滓として蓄積される極限的展示プラットフォームを提示する。
   ]</div>

    <!-- audio -->
    <div class="xpan-audio-block audio-local">
      <div class="audio-meta">
        <div class="title">mdtc.4 — mixtape</div>
        <div class="info">eden garden cinema</div>
      </div>
      <div class="audio-controls">
        <button class="play-button">play</button>
        <div class="time-display">0:00 / 0:00</div>
        <div class="progress-container"><div class="progress-fill"></div></div>
        <audio crossorigin="anonymous">
          <source src="https://ia601404.us.archive.org/15/items/mixtape-mdtc.-4/mixtape%20mdtc.4%20.wav" type="audio/wav" />
        </audio>
      </div>
      <canvas></canvas>
    </div>

    <!-- galería -->
<div class="gallery">
  <video autoplay muted loop playsinline><source src="https://attachments.are.na/38029171/c70f2ec676db10432d4df5e8b4edfda3.mov?1752183654" type="video/mp4" /></video>
  <img src="https://d2w9rnfcy7mm78.cloudfront.net/38029070/original_e7b6d2edeaec7c33f7e398a967b4ff0c.jpg?1752183429?bc=0" />
    <video autoplay muted loop playsinline><source src="https://attachments.are.na/38029238/3f48480f6d82c26d60073d5b95e9f7ce.mov?1752183909" type="video/mp4" /></video>
  <img src="https://d2w9rnfcy7mm78.cloudfront.net/38029309/original_9b731ba68e2eee8f5fc5a7f7c2ae1aa1.jpg?1752184198?bc=0" />
  <img src="https://d2w9rnfcy7mm78.cloudfront.net/38029073/original_8efbcaddd954b94114d53a98103ae916.png?1752183431?bc=0" />
  <video autoplay muted loop playsinline><source src="https://attachments.are.na/38029305/0b03a0fcd3349e3340a51dee746606a2.mov?1752184195" type="video/mp4" /></video>
  <img src="https://d2w9rnfcy7mm78.cloudfront.net/38029063/original_6dc8153cd9404303dbb7d10b4b2ba71e.jpg?1752183401?bc=0" />
  <img src="https://d2w9rnfcy7mm78.cloudfront.net/38029530/original_b2473108c7785c385e659428680d3887.jpg?1752184871?bc=0" />
  <img src="https://d2w9rnfcy7mm78.cloudfront.net/38029298/original_6383db92fd1058962f1855501f3dc537.jpg?1752184179?bc=0" />
  <img src="https://d2w9rnfcy7mm78.cloudfront.net/38029526/original_e141e42e930bcc010214eaddaa87222d.jpg?1752184858?bc=0" />
  <img src="https://d2w9rnfcy7mm78.cloudfront.net/38029065/original_4f9cd38172ebf608aba3bdf4cde8dbdd.jpg?1752183404?bc=0" />
  <video autoplay muted loop playsinline><source src="https://attachments.are.na/38029479/51a54b5ed88d49310f98303da9d81377.mov?1752184717" type="video/mp4" /></video>
  <img src="https://d2w9rnfcy7mm78.cloudfront.net/38029310/original_980215c234f48d7c0ecfd74acccdd07c.jpg?1752184199?bc=0" />
  <img src="https://d2w9rnfcy7mm78.cloudfront.net/38029306/original_63036ac71993e962e9701801d37e9a9b.jpg?1752184196?bc=0" />
  <img src="https://d2w9rnfcy7mm78.cloudfront.net/38029522/original_fc49d4c595fec3f3769bf235fa116d2d.png?1752184840?bc=0" />
  <video autoplay muted loop playsinline><source src="https://attachments.are.na/38029066/b88d096a5dcffba1eb922cba46b7fa27.mov?1752183405" type="video/mp4" /></video>
  <img src="https://d2w9rnfcy7mm78.cloudfront.net/38029524/original_37675df1822eca5b1ec28d3e8df188fa.png?1752184848?bc=0" />
  <img src="https://d2w9rnfcy7mm78.cloudfront.net/38029529/original_9d6908ca7a8a3e6a89a1492fd4499c28.jpg?1752184864?bc=0" />
  <img src="https://d2w9rnfcy7mm78.cloudfront.net/38029062/original_136f026e2847b72a83d20ab88a090049.jpg?1752183401?bc=0" />
  <img src="https://d2w9rnfcy7mm78.cloudfront.net/38029061/original_7627c13569114443cb23dc40f1f47fff.jpg?1752183400?bc=0" />
  <img src="https://d2w9rnfcy7mm78.cloudfront.net/38029311/original_9cffb18cbf52c14e9a010d3040181b8b.jpg?1752184200?bc=0" />
</div>

    <!-- PDF -->
    <div class="pdf-embed">
      <iframe src="https://attachments.are.na/38029628/56538178c853b0114f35557bb16f250e.pdf?1752185245"></iframe>
    </div>
  </div>

  <!-- scripts -->
  <script>
    function switchLang(lang) {
      document.querySelectorAll('.description[lang]').forEach(el => el.classList.remove('active'));
      const selected = document.querySelector(`.description[lang="${lang}"]`);
      if (selected) selected.classList.add('active');

      document.querySelectorAll('.lang-switcher button').forEach(btn => btn.classList.remove('active'));
      const activeBtn = document.querySelector(`.lang-switcher button[onclick*="${lang}"]`);
      if (activeBtn) activeBtn.classList.add('active');
    }
  </script>

<script>
let globalAudioContext = null;

document.querySelectorAll('.audio-local').forEach((block, index, allBlocks) => {
  const audio = block.querySelector('audio');
  const button = block.querySelector('.play-button');
  const fill = block.querySelector('.progress-fill');
  const canvas = block.querySelector('canvas');
  const ctx = canvas.getContext('2d');
  const timeDisplay = block.querySelector('.time-display');
  const progressContainer = block.querySelector('.progress-container');

  const tooltip = document.createElement('div');
  tooltip.className = 'tooltip';
  progressContainer.appendChild(tooltip);

  let audioContext = null, source, analyser, dataArray, animationId;

  const formatTime = (seconds) => {
    const m = Math.floor(seconds / 60);
    const s = Math.floor(seconds % 60);
    return `${m}:${s < 10 ? '0' : ''}${s}`;
  };

  const resizeCanvas = () => {
    canvas.width = canvas.clientWidth;
    canvas.height = canvas.clientHeight;
  };

  const draw = () => {
    if (!analyser) return;
    analyser.getByteTimeDomainData(dataArray);
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.beginPath();
    const sliceWidth = canvas.width / dataArray.length;
    let x = 0;
    for (let i = 0; i < dataArray.length; i++) {
      const v = dataArray[i] / 128.0;
      const y = (v * canvas.height) / 2;
      i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
      x += sliceWidth;
    }
    ctx.strokeStyle = 'red';
    ctx.lineWidth = 1;
    ctx.stroke();
    animationId = requestAnimationFrame(draw);
  };

  const setupVisualizer = () => {
    if (globalAudioContext && globalAudioContext.state !== 'closed') {
      globalAudioContext.close();
    }
    audioContext = new (window.AudioContext || window.webkitAudioContext)();
    globalAudioContext = audioContext;
    source = audioContext.createMediaElementSource(audio);
    analyser = audioContext.createAnalyser();
    analyser.fftSize = 2048;
    dataArray = new Uint8Array(analyser.fftSize);
    source.connect(analyser);
    analyser.connect(audioContext.destination);
    resizeCanvas();
    draw();
  };

  const playAudio = async () => {
    if (!audioContext) setupVisualizer();
    else if (audioContext.state === 'suspended') {
      await audioContext.resume();
      animationId = requestAnimationFrame(draw);
    } else {
      animationId = requestAnimationFrame(draw);
    }
    await audio.play();
    button.innerText = 'pause';
  };

  const pauseAudio = () => {
    audio.pause();
    button.innerText = 'play';
    cancelAnimationFrame(animationId);
  };

  button.addEventListener('click', () => {
    if (audio.paused) playAudio();
    else pauseAudio();
  });

  audio.addEventListener('timeupdate', () => {
    const duration = audio.duration || 0;
    if (duration > 0) {
      fill.style.width = (audio.currentTime / duration) * 100 + '%';
      timeDisplay.textContent = `${formatTime(audio.currentTime)} / ${formatTime(duration)}`;
    }
  });

  audio.addEventListener('ended', () => {
    button.innerText = 'play';
    fill.style.width = '0%';
    cancelAnimationFrame(animationId);
    const next = allBlocks[index + 1];
    if (next) next.querySelector('.play-button')?.click();
  });

  const seek = (e) => {
    const rect = progressContainer.getBoundingClientRect();
    const clientX = e.touches?.[0]?.clientX ?? e.clientX;
    const x = clientX - rect.left;
    const percent = Math.max(0, Math.min(1, x / rect.width));
    audio.currentTime = percent * (audio.duration || 0);
  };

  const showTooltip = (e) => {
    const rect = progressContainer.getBoundingClientRect();
    const clientX = e.touches?.[0]?.clientX ?? e.clientX;
    const x = clientX - rect.left;
    const percent = Math.max(0, Math.min(1, x / rect.width));
    const time = percent * (audio.duration || 0);
    tooltip.textContent = formatTime(time);
    tooltip.style.left = `${x}px`;
    tooltip.style.display = 'block';
  };

  const hideTooltip = () => { tooltip.style.display = 'none'; };

  progressContainer.addEventListener('click', seek);
  progressContainer.addEventListener('mousemove', showTooltip);
  progressContainer.addEventListener('mouseleave', hideTooltip);
  progressContainer.addEventListener('touchstart', (e) => { seek(e); showTooltip(e); });
  progressContainer.addEventListener('touchmove', showTooltip);
  progressContainer.addEventListener('touchend', hideTooltip);

  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();
});
</script>

  <script>
<div class="xpan-audio-block audio-local">
  <div class="audio-meta">
    <div class="title">mdtc.4 — mixtape</div>
    <div class="info">eden garden cinema</div>
  </div>
  <div class="audio-controls">
    <button class="play-button">play</button>
    <div class="time-display">0:00 / 0:00</div>
    <div class="progress-container"><div class="progress-fill"></div></div>
    <audio crossorigin="anonymous">
      <source src="https://ia601404.us.archive.org/15/items/mixtape-mdtc.-4/mixtape%20mdtc.4%20.wav" type="audio/wav" />
    </audio>
  </div>

  </div>
  </script>
</body>
</html>
